{"ast":null,"code":"import _regeneratorRuntime from\"D:/office/cc-front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/office/cc-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';// import axios from 'axios';\nimport axiosInstance from'../Axios/axios';import axios from'axios';// Create an async thunk\nexport var fetchUserData=createAsyncThunk('user/fetchUserData',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(\"Dataee =====>\",data);_context.next=3;return axiosInstance.post('/api/register',{name:data.name,hashed_password:data.password,email:data.email});case 3:response=_context.sent;return _context.abrupt(\"return\",response);case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());export var loginUser=createAsyncThunk('user/login',/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data,_ref2){var dispatch,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:dispatch=_ref2.dispatch;console.log(\"data\",data);_context2.next=4;return axiosInstance.post(\"/api/login\",{name:data.name,password:data.password});case 4:response=_context2.sent;return _context2.abrupt(\"return\",response);case 6:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}());export var logoutUser=createAsyncThunk('user/logout',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:localStorage.removeItem('accessToken');case 1:case\"end\":return _context3.stop();}},_callee3);})));var userSlice=createSlice({name:'user',initialState:{userData:null,loading:false,error:null,status:null},reducers:{},extraReducers:function extraReducers(builder){builder.addCase(fetchUserData.pending,function(state){state.loading=true;state.error=null;}).addCase(fetchUserData.fulfilled,function(state,action){console.log(\"my payload\",action.payload);state.loading=false;state.userData=action.payload.data;localStorage.setItem('accessToken',action.payload.data.access_token);state.status=action.payload.status;}).addCase(fetchUserData.rejected,function(state,action){state.loading=false;state.error=action.error.message;}).addCase(loginUser.pending,function(state){state.loading=true;state.error=null;}).addCase(loginUser.fulfilled,function(state,action){state.loading=false;state.userData=action.payload.data;localStorage.setItem('accessToken',action.payload.data.access_token);state.status=action.payload.status;}).addCase(loginUser.rejected,function(state,action){state.loading=false;state.error=action.error.message;}).addCase(logoutUser.pending,function(state){state.loading=true;state.error=null;}).addCase(logoutUser.fulfilled,function(state){state.loading=false;state.userData=null;state.status=null;});}});// Export the action creator\nvar userActions=userSlice.actions;// Export the reducer\nexport{userActions};export default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axiosInstance","axios","fetchUserData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","response","wrap","_callee$","_context","prev","next","console","log","post","name","hashed_password","password","email","sent","abrupt","stop","_x","apply","arguments","loginUser","_ref3","_callee2","_ref2","dispatch","_callee2$","_context2","_x2","_x3","logoutUser","_callee3","_callee3$","_context3","localStorage","removeItem","userSlice","initialState","userData","loading","error","status","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","setItem","access_token","rejected","message","userActions","actions","reducer"],"sources":["D:/office/cc-front/src/Slice/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\n// import axios from 'axios';\r\nimport axiosInstance from '../Axios/axios'; \r\nimport axios from 'axios';\r\n\r\n// Create an async thunk\r\nexport const fetchUserData = createAsyncThunk(\r\n    'user/fetchUserData',\r\n    async (data) => {   \r\n    console.log(\"Dataee =====>\",data)\r\n      const response = await axiosInstance.post('/api/register',{name:data.name,hashed_password:data.password,email:data.email})\r\n\r\n      return response;\r\n      \r\n    }\r\n  );\r\n\r\n  export const loginUser =  createAsyncThunk(\r\n    'user/login',\r\n    async (data,{dispatch}) =>{\r\n      console.log(\"data\",data)\r\n      const response =  await axiosInstance.post(\"/api/login\",{name:data.name,password:data.password})\r\n      return response\r\n    }\r\n  )\r\nexport const logoutUser =  createAsyncThunk(\r\n  'user/logout',\r\n  async()=>{\r\n      localStorage.removeItem('accessToken')\r\n  }\r\n  )\r\n  const userSlice = createSlice({\r\n    name: 'user',\r\n    initialState: {\r\n      userData: null,\r\n      loading: false,\r\n      error: null,\r\n      status:null\r\n    },\r\n    reducers: {\r\n   \r\n    },\r\n    extraReducers: (builder) => {\r\n      builder\r\n        .addCase(fetchUserData.pending, (state) => {\r\n          state.loading = true;\r\n          state.error = null;\r\n        })\r\n\r\n        .addCase(fetchUserData.fulfilled, (state, action) => {\r\n        console.log(\"my payload\",action.payload)\r\n          state.loading = false;\r\n          state.userData = action.payload.data;\r\n          localStorage.setItem('accessToken', action.payload.data.access_token);\r\n          state.status = action.payload.status;\r\n          \r\n        })\r\n        .addCase(fetchUserData.rejected, (state, action) => {\r\n          state.loading = false;\r\n          state.error = action.error.message;\r\n        })\r\n        .addCase(loginUser.pending,(state)=>{\r\n          state.loading = true;\r\n          state.error = null;\r\n        })\r\n        .addCase(loginUser.fulfilled,(state,action)=>{\r\n          state.loading = false;\r\n          state.userData = action.payload.data;\r\n          localStorage.setItem('accessToken',action.payload.data.access_token);\r\n          state.status = action.payload.status;\r\n         \r\n        })\r\n        .addCase(loginUser.rejected,(state,action)=>{\r\n          state.loading = false;\r\n          state.error = action.error.message;\r\n        }) \r\n        .addCase(logoutUser.pending,(state)=>{\r\n          state.loading =  true\r\n          state.error = null\r\n        })\r\n        .addCase(logoutUser.fulfilled,(state)=>{\r\n          state.loading= false;\r\n          state.userData = null;\r\n          state.status = null;\r\n\r\n        })\r\n    },\r\n  });\r\n  \r\n  // Export the action creator\r\n  export const { actions: userActions } = userSlice;\r\n\r\n  \r\n  // Export the reducer\r\n  export default userSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}