{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\n// import axios from 'axios';\nimport axiosInstance from '../Axios/axios';\nimport axios from 'axios';\n\n// Create an async thunk\nexport const fetchUserData = createAsyncThunk('user/fetchUserData', async data => {\n  console.log(\"Dataee =====>\", data);\n  const response = await axiosInstance.post('/api/register', {\n    name: data.name,\n    hashed_password: data.password,\n    email: data.email\n  });\n  return response;\n});\nexport const loginUser = createAsyncThunk('user/login', async (data, _ref) => {\n  let {\n    dispatch\n  } = _ref;\n  console.log(\"data\", data);\n  const response = await axiosInstance.post(\"/api/login\", {\n    name: data.name,\n    password: data.password\n  });\n  return response;\n});\nexport const logoutUser = createAsyncThunk('user/logout', async () => {\n  localStorage.removeItem('accessToken');\n});\nconst userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    userData: null,\n    loading: false,\n    error: null,\n    status: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchUserData.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchUserData.fulfilled, (state, action) => {\n      console.log(\"my payload\", action.payload);\n      state.loading = false;\n      state.userData = action.payload.data;\n      localStorage.setItem('accessToken', action.payload.data.access_token);\n      state.status = action.payload.status;\n    }).addCase(fetchUserData.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    }).addCase(loginUser.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(loginUser.fulfilled, (state, action) => {\n      state.loading = false;\n      state.userData = action.payload.data;\n      localStorage.setItem('accessToken', action.payload.data.access_token);\n      state.status = action.payload.status;\n    }).addCase(loginUser.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.error.message;\n    }).addCase(logoutUser.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(logoutUser.fulfilled, state => {\n      state.loading = false;\n      state.userData = null;\n      state.status = null;\n    });\n  }\n});\n\n// Export the action creator\nexport const {\n  actions: userActions\n} = userSlice;\n\n// Export the reducer\nexport default userSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axiosInstance","axios","fetchUserData","data","console","log","response","post","name","hashed_password","password","email","loginUser","_ref","dispatch","logoutUser","localStorage","removeItem","userSlice","initialState","userData","loading","error","status","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","setItem","access_token","rejected","message","actions","userActions","reducer"],"sources":["D:/office/cc-front/src/Slice/userSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\n// import axios from 'axios';\r\nimport axiosInstance from '../Axios/axios'; \r\nimport axios from 'axios';\r\n\r\n// Create an async thunk\r\nexport const fetchUserData = createAsyncThunk(\r\n    'user/fetchUserData',\r\n    async (data) => {   \r\n    console.log(\"Dataee =====>\",data)\r\n      const response = await axiosInstance.post('/api/register',{name:data.name,hashed_password:data.password,email:data.email})\r\n\r\n      return response;\r\n      \r\n    }\r\n  );\r\n\r\n  export const loginUser =  createAsyncThunk(\r\n    'user/login',\r\n    async (data,{dispatch}) =>{\r\n      console.log(\"data\",data)\r\n      const response =  await axiosInstance.post(\"/api/login\",{name:data.name,password:data.password})\r\n      return response\r\n    }\r\n  )\r\nexport const logoutUser =  createAsyncThunk(\r\n  'user/logout',\r\n  async()=>{\r\n      localStorage.removeItem('accessToken')\r\n  }\r\n  )\r\n  const userSlice = createSlice({\r\n    name: 'user',\r\n    initialState: {\r\n      userData: null,\r\n      loading: false,\r\n      error: null,\r\n      status:null\r\n    },\r\n    reducers: {\r\n   \r\n    },\r\n    extraReducers: (builder) => {\r\n      builder\r\n        .addCase(fetchUserData.pending, (state) => {\r\n          state.loading = true;\r\n          state.error = null;\r\n        })\r\n\r\n        .addCase(fetchUserData.fulfilled, (state, action) => {\r\n        console.log(\"my payload\",action.payload)\r\n          state.loading = false;\r\n          state.userData = action.payload.data;\r\n          localStorage.setItem('accessToken', action.payload.data.access_token);\r\n          state.status = action.payload.status;\r\n          \r\n        })\r\n        .addCase(fetchUserData.rejected, (state, action) => {\r\n          state.loading = false;\r\n          state.error = action.error.message;\r\n        })\r\n        .addCase(loginUser.pending,(state)=>{\r\n          state.loading = true;\r\n          state.error = null;\r\n        })\r\n        .addCase(loginUser.fulfilled,(state,action)=>{\r\n          state.loading = false;\r\n          state.userData = action.payload.data;\r\n          localStorage.setItem('accessToken',action.payload.data.access_token);\r\n          state.status = action.payload.status;\r\n         \r\n        })\r\n        .addCase(loginUser.rejected,(state,action)=>{\r\n          state.loading = false;\r\n          state.error = action.error.message;\r\n        }) \r\n        .addCase(logoutUser.pending,(state)=>{\r\n          state.loading =  true\r\n          state.error = null\r\n        })\r\n        .addCase(logoutUser.fulfilled,(state)=>{\r\n          state.loading= false;\r\n          state.userData = null;\r\n          state.status = null;\r\n\r\n        })\r\n    },\r\n  });\r\n  \r\n  // Export the action creator\r\n  export const { actions: userActions } = userSlice;\r\n\r\n  \r\n  // Export the reducer\r\n  export default userSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}